<%- include("../user/layouts/userheader.ejs") %>

    <section class="breadcrumb-option">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__text">
                        <h4 class="mx-3">Edit Address</h4>
                        <div class="breadcrumb__links">
                            <a href="/">Home</a>
                            <a href="/profile">Profile</a>
                            <span>Edit Address</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="container mt-5 mb-5">
        <div class="row">
            <div class="col-md-6 offset-md-3">
                <form action="/edit-address" method="post" onsubmit="return validateForm()">
                    <div class="error-message" style="color: red;" id="codeError"></div>
                    <div class="form-group">
                        <label for="firstName">First Name:</label>
                        <input type="text" class="form-control" id="fname" name="fname" value="<%= address.fname %>" placeholder="Enter first name" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name:</label>
                        <input type="text" class="form-control" id="lname" name="lname" value="<%= address.lname %>" placeholder="Enter last name" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone:</label>
                        <input type="number" class="form-control" id="phone" name="phone" value="<%= address.phone %>" placeholder="Enter phone number" required>
                        <div class="error-message" style="color: red;" id="phoneError"></div>
                    </div>
                    <div class="form-group">
                        <label for="address">Address:</label>
                        <input type="text" class="form-control" id="address" name="address" value="<%= address.address %>" placeholder="Enter address" required>
                    </div>
                    <div class="form-group">
                        <label for="city">City:</label>
                        <input type="text" class="form-control" id="city" name="city" value="<%= address.city %>" placeholder="Enter city" required>
                    </div>
                    <div class="form-group">
                        <label for="pin">PIN:</label>
                        <input type="number" class="form-control" id="pin" name="pin" value="<%= address.pin %>" placeholder="Enter PIN code" required>
                        <div class="error-message" style="color: red;" id="pinError"></div>
                    </div>
                    <input type="hidden" name="addressId" id="addressId" value="<%= address._id %>">
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        function validateForm() {
            const fname = document.getElementById('fname').value.trim();
            const lname = document.getElementById('lname').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const address = document.getElementById('address').value.trim();
            const city = document.getElementById('city').value.trim();
            const pin = document.getElementById('pin').value.trim();
            console.log(fname);
    
            const codeError = document.getElementById('codeError');
            const phoneError = document.getElementById('phoneError');
            const pinError = document.getElementById('pinError');
    
            codeError.innerText = '';
            phoneError.innerText = '';
            pinError.innerText = '';
    
            // Check if any field is empty or contains only spaces
            if (fname === '' || lname === '' || phone === '' || address === '' || city === '' || pin === '') {
                codeError.innerText = 'Please fill all the fields.';
                return false;
            }
    
            // Check if phone number is exactly 10 digits
            if (phone.length !== 10 || phone.length > 10) {
                phoneError.innerText = 'Phone number should be 10 digits.';
                return false;
            }
    
            // Check if pin code is exactly 6 digits
            if (pin.length !== 6) {
                pinError.innerText = 'PIN code should be 6 digits.';
                return false;
            }
        }
    </script>


    <%- include("../user/layouts/userfooter.ejs") %>