<%- include("../user/layouts/userheader.ejs") %>

    <section class="breadcrumb-option">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__text">
                        <h4 class="mx-3">Change Password</h4>
                        <div class="breadcrumb__links">
                            <a href="/">Home</a>
                            <a href="/profile">Profile</a>
                            <span>Change Password</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <div class="container mt-5 mb-5">
        <div class="row">
          <div class="col-md-6 offset-md-3">
            <form action="/change-password" method="post" onsubmit="return validateForm()">
              <div class="form-group">
                <label for="oldPassword">Old Password:</label>
                <input type="password" class="form-control" id="opass" name="opass" placeholder="Enter old password" required>
              </div>
              <div class="form-group">
                <label for="newPassword">New Password:</label>
                <input type="password" class="form-control" id="npass" name="npass" placeholder="Enter new password" required>
              </div>
              <input type="hidden" id="id" name="id" value="<%= user._id %>">
              <div class="form-group">
                <label for="confirmPassword">Confirm Password:</label>
                <input type="password" class="form-control" id="cpass" name="cpass" placeholder="Confirm new password" required>
              </div>
              <div>
                <% if (typeof message !== 'undefined') { %>
                    <p class="text-danger">
                        <%= message %>
                    </p>
                <% } %>
              </div>
              <button type="submit" class="btn btn-primary">Change Password</button>
              <div class="error-message" id="error" style="color: red;" ></div>
            </form>
          </div>
        </div>
      </div>

      <script>
        function validateForm(){
          const opass = document.getElementById('opass').value.trim()
          const npass = document.getElementById('npass').value.trim()
          const cpass = document.getElementById('cpass').value.trim()
          const error = document.getElementById('error').value.trim()

          error.innerHTML = ''

          if(opass == '' || npass == '' || cpass == '') {
            error.innerHTML = 'Please fill out all fields'
            return false
          }

          return true

        }

      </script>
      


<%- include("../user/layouts/userfooter.ejs") %>